{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios'; \n\nconst apiKey = \"41495993-e4e29dd1119c53de35b82b765\";\nconst searchForm = document.getElementById(\"search-form\");\nconst searchInput = document.getElementById(\"search-input\");\nconst gallery = document.getElementById(\"gallery\");\nconst loader = document.getElementById(\"loader\");\nconst loadMoreBtn = document.getElementById('load-more');\n\nlet currentPage = 1;\n\nsearchForm.addEventListener(\"submit\", handleSearch);\nloadMoreBtn.addEventListener('click', loadMore);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  const searchTerm = searchInput.value.trim();\n  if (searchTerm === \"\") {\n    return;\n  }\n\n  clearGallery();\n  showLoader();\n\n  fetchImages(searchTerm)\n    .then((data) => {\n      if (data.hits.length === 0) {\n        showError(\"Вибачте, за вашим запитом не знайдено зображень. Будь ласка, спробуйте ще раз!\");\n      } else {\n        renderGallery(data.hits);\n        initLightbox();\n      }\n    })\n    .catch((error) => {\n      showError(\"Виникла помилка під час отримання зображень. Будь ласка, спробуйте пізніше.\");\n      console.error(\"Помилка отримання зображень:\", error);\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\nasync function fetchImages(query, page = 1) {\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}`;\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nfunction renderGallery(images) {\n  const galleryHTML = images\n    .map(\n      (image) => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\" data-lightbox=\"gallery\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n          <div class=\"info\">\n            <p>${image.likes} лайків</p>\n            <p>${image.views} переглядів</p>\n            <p>${image.comments} коментарів</p>\n            <p>${image.downloads} завантажень</p>\n          </div>\n        </a>\n      `\n    )\n    .join(\"\");\n  gallery.innerHTML = galleryHTML;\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nfunction initLightbox() {\n  const lightbox = new SimpleLightbox(\".gallery a\");\n  lightbox.refresh();\n}\n\nfunction showLoader() {\n  loader.style.display = \"block\";\n}\n\nfunction hideLoader() {\n  loader.style.display = \"none\";\n}\n\nfunction showError(message) {\n  iziToast.error({\n    title: \"Помилка\",\n    message: message,\n    position: \"topCenter\",\n    timeout: 5000,\n  });\n}\n\nasync function loadMore() {\n  showLoader();\n  currentPage++;\n  const searchTerm = searchInput.value.trim();\n\n  try {\n    const data = await fetchImages(searchTerm, currentPage);\n\n    if (data.hits.length > 0) {\n      renderGallery(data.hits);\n      smoothScroll();\n    } else {\n      hideLoader();\n      loadMoreBtn.style.display = 'none';\n      showError(\"Вибачте, ви досягли кінця результатів пошуку.\");\n    }\n  } catch (error) {\n    hideLoader();\n    showError(\"Виникла помилка під час отримання додаткових зображень. Будь ласка, спробуйте пізніше.\");\n    console.error(\"Помилка отримання зображень:\", error);\n  }\n   finally {\n    hideLoader();\n  }\n}\n\nfunction smoothScroll() {\n  const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n"],"names":["apiKey","searchForm","searchInput","gallery","loader","loadMoreBtn","currentPage","handleSearch","loadMore","event","searchTerm","clearGallery","showLoader","fetchImages","data","showError","renderGallery","initLightbox","error","hideLoader","query","page","url","axios","images","galleryHTML","image","SimpleLightbox","message","iziToast","smoothScroll","cardHeight"],"mappings":"owBAOA,MAAMA,EAAS,qCACTC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAc,SAAS,eAAe,WAAW,EAEvD,IAAIC,EAAc,EAElBL,EAAW,iBAAiB,SAAUM,CAAY,EAClDF,EAAY,iBAAiB,QAASG,CAAQ,EAE9C,SAASD,EAAaE,EAAO,CAC3BA,EAAM,eAAc,EACpB,MAAMC,EAAaR,EAAY,MAAM,KAAI,EACrCQ,IAAe,KAInBC,IACAC,IAEAC,EAAYH,CAAU,EACnB,KAAMI,GAAS,CACVA,EAAK,KAAK,SAAW,EACvBC,EAAU,gFAAgF,GAE1FC,EAAcF,EAAK,IAAI,EACvBG,IAER,CAAK,EACA,MAAOC,GAAU,CAChBH,EAAU,6EAA6E,EACvF,QAAQ,MAAM,+BAAgCG,CAAK,CACzD,CAAK,EACA,QAAQ,IAAM,CACbC,GACN,CAAK,EACL,CAEA,eAAeN,EAAYO,EAAOC,EAAO,EAAG,CAC1C,MAAMC,EAAM,gCAAgCtB,OAAYoB,kEAAsEC,IAC9H,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQJ,EAAP,CACA,MAAMA,CACP,CACH,CAEA,SAASF,EAAcQ,EAAQ,CAC7B,MAAMC,EAAcD,EACjB,IACEE,GAAU;AAAA,mBACEA,EAAM;AAAA,sBACHA,EAAM,sBAAsBA,EAAM;AAAA;AAAA,iBAEvCA,EAAM;AAAA,iBACNA,EAAM;AAAA,iBACNA,EAAM;AAAA,iBACNA,EAAM;AAAA;AAAA;AAAA,OAIlB,EACA,KAAK,EAAE,EACVvB,EAAQ,UAAYsB,CACtB,CAEA,SAASd,GAAe,CACtBR,EAAQ,UAAY,EACtB,CAEA,SAASc,GAAe,CACL,IAAIU,EAAe,YAAY,EACvC,QAAO,CAClB,CAEA,SAASf,GAAa,CACpBR,EAAO,MAAM,QAAU,OACzB,CAEA,SAASe,GAAa,CACpBf,EAAO,MAAM,QAAU,MACzB,CAEA,SAASW,EAAUa,EAAS,CAC1BC,EAAS,MAAM,CACb,MAAO,UACP,QAASD,EACT,SAAU,YACV,QAAS,GACb,CAAG,CACH,CAEA,eAAepB,GAAW,CACxBI,IACAN,IACA,MAAMI,EAAaR,EAAY,MAAM,KAAI,EAEzC,GAAI,CACF,MAAMY,EAAO,MAAMD,EAAYH,EAAYJ,CAAW,EAElDQ,EAAK,KAAK,OAAS,GACrBE,EAAcF,EAAK,IAAI,EACvBgB,MAEAX,IACAd,EAAY,MAAM,QAAU,OAC5BU,EAAU,+CAA+C,EAE5D,OAAQG,EAAP,CACAC,IACAJ,EAAU,wFAAwF,EAClG,QAAQ,MAAM,+BAAgCG,CAAK,CACpD,QACQ,CACPC,GACD,CACH,CAEA,SAASW,GAAe,CACtB,MAAMC,EAAa,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAEnF,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}
{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios'; \n\nconst apiKey = \"41495993-e4e29dd1119c53de35b82b765\";\n    const searchForm = document.getElementById(\"search-form\");\n    const searchInput = document.getElementById(\"search-input\");\n    const gallery = document.getElementById(\"gallery\");\n    const loader = document.getElementById(\"loader\");\n    const loadMoreBtn = document.getElementById('load-more');\n\n    let currentPage = 1;\n    let currentSearchTerm = \"\";\n\n    searchForm.addEventListener(\"submit\", handleSearch);\n    loadMoreBtn.addEventListener('click', loadMore);\n\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  const searchTerm = searchInput.value.trim();\n  if (searchTerm === \"\") {\n    return;\n  }\n\n  currentSearchTerm = searchTerm;\n  currentPage = 1;\n  clearGallery();\n  showLoader();\n\n  fetchImages(currentSearchTerm, currentPage)\n    .then((data) => {\n      if (data.hits.length === 0) {\n        showError(\"No images found for your search. Please try again!\");\n      } else {\n        renderGallery(data.hits);\n        initLightbox();\n        showLoadMoreButton();\n      }\n    })\n    .catch((error) => handleError(error))\n    .finally(() => hideLoader());\n}\n\nfunction loadMore() {\n  if (currentPage === 1) {\n  hideLoader();\n    loadMoreBtn.style.display = 'none';\n  } else {\n    showLoader();\n  }\n currentPage++;\n  fetchImages(currentSearchTerm, currentPage)\n    .then((data) => {\n      if (data.hits.length > 0) {\n        renderGallery(data.hits);\n        smoothScroll();\n      } else {\n        loadMoreBtn.style.display = 'none';\n        showError(\"No more images available for your search.\");\n      }\n    })\n    .catch((error) => handleError(error))\n    .finally(() => hideLoader());\n}\n\nfunction handleError(error) {\n  showError(`Error: ${error.message}`);\n  console.error(\"Error:\", error);\n}\n\nfunction smoothScroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (galleryItem) {\n    const cardHeight = galleryItem.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\n\n    async function fetchImages(query, page = 1) {\n  const perPage = 40;\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    throw new Error(`Error fetching images: ${error.message}`);\n  }\n}\n\n    function renderGallery(images) {\n      const galleryHTML = images\n        .map(\n          (image) => `\n            <a href=\"${image.largeImageURL}\" class=\"gallery-item\" data-lightbox=\"gallery\">\n              <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n              <div class=\"info\">\n                <p>${image.likes} likes</p>\n                <p>${image.views} views</p>\n                <p>${image.comments} comments</p>\n                <p>${image.downloads} downloads</p>\n              </div>\n            </a>\n          `\n        )\n        .join(\"\");\n      gallery.innerHTML += galleryHTML;\n    }\n\n    function clearGallery() {\n      gallery.innerHTML = \"\";\n    }\n\n    function initLightbox() {\n      const lightbox = new SimpleLightbox(\".gallery a\");\n      lightbox.refresh();\n    }\n\n    function showLoader() {\n      loader.style.display = \"block\";\n    }\n\n    function hideLoader() {\n      loader.style.display = \"none\";\n    }\n\n    function showError(message) {\n      iziToast.error({\n        title: \"Error\",\n        message: message,\n        position: \"topCenter\",\n        timeout: 5000,\n      });\n    }\n\n    function showLoadMoreButton() {\n      loadMoreBtn.style.display = 'block';\n    }\n"],"names":["apiKey","searchForm","searchInput","gallery","loader","loadMoreBtn","currentPage","currentSearchTerm","handleSearch","loadMore","event","searchTerm","clearGallery","showLoader","fetchImages","data","showError","renderGallery","initLightbox","showLoadMoreButton","error","handleError","hideLoader","smoothScroll","galleryItem","cardHeight","query","page","url","axios","images","galleryHTML","image","SimpleLightbox","message","iziToast"],"mappings":"owBAOA,MAAMA,EAAS,qCACLC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAc,SAAS,eAAe,WAAW,EAEvD,IAAIC,EAAc,EACdC,EAAoB,GAExBN,EAAW,iBAAiB,SAAUO,CAAY,EAClDH,EAAY,iBAAiB,QAASI,CAAQ,EAGlD,SAASD,EAAaE,EAAO,CAC3BA,EAAM,eAAc,EACpB,MAAMC,EAAaT,EAAY,MAAM,KAAI,EACrCS,IAAe,KAInBJ,EAAoBI,EACpBL,EAAc,EACdM,IACAC,IAEAC,EAAYP,EAAmBD,CAAW,EACvC,KAAMS,GAAS,CACVA,EAAK,KAAK,SAAW,EACvBC,EAAU,oDAAoD,GAE9DC,EAAcF,EAAK,IAAI,EACvBG,IACAC,IAER,CAAK,EACA,MAAOC,GAAUC,EAAYD,CAAK,CAAC,EACnC,QAAQ,IAAME,EAAU,CAAE,EAC/B,CAEA,SAASb,GAAW,CACdH,IAAgB,GACpBgB,IACEjB,EAAY,MAAM,QAAU,QAE5BQ,IAEHP,IACCQ,EAAYP,EAAmBD,CAAW,EACvC,KAAMS,GAAS,CACVA,EAAK,KAAK,OAAS,GACrBE,EAAcF,EAAK,IAAI,EACvBQ,MAEAlB,EAAY,MAAM,QAAU,OAC5BW,EAAU,2CAA2C,EAE7D,CAAK,EACA,MAAOI,GAAUC,EAAYD,CAAK,CAAC,EACnC,QAAQ,IAAME,EAAU,CAAE,CAC/B,CAEA,SAASD,EAAYD,EAAO,CAC1BJ,EAAU,UAAUI,EAAM,SAAS,EACnC,QAAQ,MAAM,SAAUA,CAAK,CAC/B,CAEA,SAASG,GAAe,CACtB,MAAMC,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CACf,MAAMC,EAAaD,EAAY,sBAAqB,EAAG,OAEvD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH,CAGI,eAAeX,EAAYY,EAAOC,EAAO,EAAG,CAE9C,MAAMC,EAAM,gCAAgC5B,OAAY0B,kEAAsEC,cAAiB,KAC/I,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQR,EAAP,CACA,MAAM,IAAI,MAAM,0BAA0BA,EAAM,SAAS,CAC1D,CACH,CAEI,SAASH,EAAca,EAAQ,CAC7B,MAAMC,EAAcD,EACjB,IACEE,GAAU;AAAA,uBACEA,EAAM;AAAA,0BACHA,EAAM,sBAAsBA,EAAM;AAAA;AAAA,qBAEvCA,EAAM;AAAA,qBACNA,EAAM;AAAA,qBACNA,EAAM;AAAA,qBACNA,EAAM;AAAA;AAAA;AAAA,WAIlB,EACA,KAAK,EAAE,EACV7B,EAAQ,WAAa4B,CACtB,CAED,SAASnB,GAAe,CACtBT,EAAQ,UAAY,EACrB,CAED,SAASe,GAAe,CACL,IAAIe,EAAe,YAAY,EACvC,QAAO,CACjB,CAED,SAASpB,GAAa,CACpBT,EAAO,MAAM,QAAU,OACxB,CAED,SAASkB,GAAa,CACpBlB,EAAO,MAAM,QAAU,MACxB,CAED,SAASY,EAAUkB,EAAS,CAC1BC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,YACV,QAAS,GACjB,CAAO,CACF,CAED,SAASf,GAAqB,CAC5Bd,EAAY,MAAM,QAAU,OAClC"}
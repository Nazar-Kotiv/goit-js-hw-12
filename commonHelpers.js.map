{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios'; \n\nconst apiKey = \"41495993-e4e29dd1119c53de35b82b765\";\n    const searchForm = document.getElementById(\"search-form\");\n    const searchInput = document.getElementById(\"search-input\");\n    const gallery = document.getElementById(\"gallery\");\n    const loader = document.getElementById(\"loader\");\n    const loadMoreBtn = document.getElementById('load-more');\n\n    let currentPage = 1;\n    let currentSearchTerm = \"\";\n\n    searchForm.addEventListener(\"submit\", handleSearch);\n    loadMoreBtn.addEventListener('click', loadMore);\n\n    function handleSearch(event) {\n      event.preventDefault();\n      const searchTerm = searchInput.value.trim();\n      if (searchTerm === \"\") {\n        return;\n      }\n\n      currentSearchTerm = searchTerm;\n      currentPage = 1;\n      clearGallery();\n      showLoader();\n\n      fetchImages(currentSearchTerm, currentPage)\n        .then((data) => {\n          if (data.hits.length === 0) {\n            showError(\"No images found for your search. Please try again!\");\n          } else {\n            renderGallery(data.hits);\n            initLightbox();\n            showLoadMoreButton();\n          }\n        })\n        .catch((error) => {\n          showError(\"Error fetching images. Please try again later.\");\n          console.error(\"Error fetching images:\", error);\n        })\n        .finally(() => {\n          hideLoader();\n        });\n    }\n\n    async function fetchImages(query, page = 1) {\n      const perPage = 40;\n      const url = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n      try {\n        const response = await axios.get(url);\n        return response.data;\n      } catch (error) {\n        throw error;\n      }\n    }\n\n    function renderGallery(images) {\n      const galleryHTML = images\n        .map(\n          (image) => `\n            <a href=\"${image.largeImageURL}\" class=\"gallery-item\" data-lightbox=\"gallery\">\n              <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n              <div class=\"info\">\n                <p>${image.likes} likes</p>\n                <p>${image.views} views</p>\n                <p>${image.comments} comments</p>\n                <p>${image.downloads} downloads</p>\n              </div>\n            </a>\n          `\n        )\n        .join(\"\");\n      gallery.innerHTML += galleryHTML;\n    }\n\n    function clearGallery() {\n      gallery.innerHTML = \"\";\n    }\n\n    function initLightbox() {\n      const lightbox = new SimpleLightbox(\".gallery a\");\n      lightbox.refresh();\n    }\n\n    function showLoader() {\n      loader.style.display = \"block\";\n    }\n\n    function hideLoader() {\n      loader.style.display = \"none\";\n    }\n\n    function showError(message) {\n      iziToast.error({\n        title: \"Error\",\n        message: message,\n        position: \"topCenter\",\n        timeout: 5000,\n      });\n    }\n\n    function showLoadMoreButton() {\n      loadMoreBtn.style.display = 'block';\n    }\n\n    async function loadMore() {\n      showLoader();\n      currentPage++;\n\n      try {\n        const data = await fetchImages(currentSearchTerm, currentPage);\n\n        if (data.hits.length > 0) {\n          renderGallery(data.hits);\n          smoothScroll();\n        } else {\n          hideLoader();\n          loadMoreBtn.style.display = 'none';\n          showError(\"No more images available for your search.\");\n        }\n      } catch (error) {\n        hideLoader();\n        showError(\"Error fetching additional images. Please try again later.\");\n        console.error(\"Error fetching images:\", error);\n      }\n      finally {\n        hideLoader();\n      }\n    }\n\n    function smoothScroll() {\n      const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }"],"names":["apiKey","searchForm","searchInput","gallery","loader","loadMoreBtn","currentPage","currentSearchTerm","handleSearch","loadMore","event","searchTerm","clearGallery","showLoader","fetchImages","data","showError","renderGallery","initLightbox","showLoadMoreButton","error","hideLoader","query","page","url","axios","images","galleryHTML","image","SimpleLightbox","message","iziToast","smoothScroll","cardHeight"],"mappings":"owBAOA,MAAMA,EAAS,qCACLC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAc,SAAS,eAAe,WAAW,EAEvD,IAAIC,EAAc,EACdC,EAAoB,GAExBN,EAAW,iBAAiB,SAAUO,CAAY,EAClDH,EAAY,iBAAiB,QAASI,CAAQ,EAE9C,SAASD,EAAaE,EAAO,CAC3BA,EAAM,eAAc,EACpB,MAAMC,EAAaT,EAAY,MAAM,KAAI,EACrCS,IAAe,KAInBJ,EAAoBI,EACpBL,EAAc,EACdM,IACAC,IAEAC,EAAYP,EAAmBD,CAAW,EACvC,KAAMS,GAAS,CACVA,EAAK,KAAK,SAAW,EACvBC,EAAU,oDAAoD,GAE9DC,EAAcF,EAAK,IAAI,EACvBG,IACAC,IAEZ,CAAS,EACA,MAAOC,GAAU,CAChBJ,EAAU,gDAAgD,EAC1D,QAAQ,MAAM,yBAA0BI,CAAK,CACvD,CAAS,EACA,QAAQ,IAAM,CACbC,GACV,CAAS,EACJ,CAED,eAAeP,EAAYQ,EAAOC,EAAO,EAAG,CAE1C,MAAMC,EAAM,gCAAgCxB,OAAYsB,kEAAsEC,cAAiB,KAC/I,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQJ,EAAP,CACA,MAAMA,CACP,CACF,CAED,SAASH,EAAcS,EAAQ,CAC7B,MAAMC,EAAcD,EACjB,IACEE,GAAU;AAAA,uBACEA,EAAM;AAAA,0BACHA,EAAM,sBAAsBA,EAAM;AAAA;AAAA,qBAEvCA,EAAM;AAAA,qBACNA,EAAM;AAAA,qBACNA,EAAM;AAAA,qBACNA,EAAM;AAAA;AAAA;AAAA,WAIlB,EACA,KAAK,EAAE,EACVzB,EAAQ,WAAawB,CACtB,CAED,SAASf,GAAe,CACtBT,EAAQ,UAAY,EACrB,CAED,SAASe,GAAe,CACL,IAAIW,EAAe,YAAY,EACvC,QAAO,CACjB,CAED,SAAShB,GAAa,CACpBT,EAAO,MAAM,QAAU,OACxB,CAED,SAASiB,GAAa,CACpBjB,EAAO,MAAM,QAAU,MACxB,CAED,SAASY,EAAUc,EAAS,CAC1BC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,YACV,QAAS,GACjB,CAAO,CACF,CAED,SAASX,GAAqB,CAC5Bd,EAAY,MAAM,QAAU,OAC7B,CAED,eAAeI,GAAW,CACxBI,IACAP,IAEA,GAAI,CACF,MAAMS,EAAO,MAAMD,EAAYP,EAAmBD,CAAW,EAEzDS,EAAK,KAAK,OAAS,GACrBE,EAAcF,EAAK,IAAI,EACvBiB,MAEAX,IACAhB,EAAY,MAAM,QAAU,OAC5BW,EAAU,2CAA2C,EAExD,OAAQI,EAAP,CACAC,IACAL,EAAU,2DAA2D,EACrE,QAAQ,MAAM,yBAA0BI,CAAK,CAC9C,QACO,CACNC,GACD,CACF,CAED,SAASW,GAAe,CACtB,MAAMC,EAAa,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAEnF,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAO,CACP"}